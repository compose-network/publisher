# POC configuration for Publisher

# Global settings
genesis_time: 1234567890  # App genesis time (Unix timestamp) - override in production

server:
  listen_addr: ":8080"
  write_timeout: 30s
  max_message_size: 10485760
  max_connections: 100

metrics:
  enabled: true
  port: 8081
  path: /metrics

# HTTP API server (health, metrics, proofs API)
api:
  listen_addr: ":8081"
  read_header_timeout: 5s
  read_timeout: 15s
  write_timeout: 30s
  idle_timeout: 120s
  max_header_bytes: 1048576

log:
  level: info
  pretty: true
  output: stdout

consensus:
  timeout: "3s"
  role: "leader"

# L1 (Ethereum) configuration for superblock publishing
l1:
  # You can override via env L1_RPC_ENDPOINT
  rpc_endpoint: ""
  # DisputeGameFactory contract for proof-enabled superblock submission
  dispute_game_factory: ""
  chain_id: 0                # autodetect
  confirmations: 2
  finality_depth: 64
  use_eip1559: true
  max_fee_per_gas_wei: "0"
  max_priority_fee_wei: "0"
  gas_limit_buffer_pct: 15
  # You can override via env L1_SHARED_PUBLISHER_PK_HEX
  shared_publisher_pk_hex: ""
  from_address: ""

# Proofs pipeline configuration
proofs:
  enabled: true
  collector:
    require_all_chains: false  # ← Start with false for testing
    wait_timeout: 300s
    required_chain_ids: [11155111, 84532]  # ← Specify exactly which chains you expect
  prover:
    base_url: "http://localhost:38080"
    poll_interval: 5s          # ← Reasonable polling
    proof_type: "groth16"
  require_proof: true

auth:
  enabled: false
  private_key: ""
  trusted_sequencers:
    - id: "55555"
      public_key: ""
    - id: "66666"
      public_key: ""

# Batch synchronization (synchronized block ranges across rollups)
batch:
  enabled: true
  chain_id: 11155111            # Rollup chain ID
  ethereum_genesis: 1606824023  # Ethereum genesis for epoch calculation (Unix timestamp)
  max_concurrent_jobs: 5        # Max concurrent proof generation jobs
  worker_poll_interval: 10s     # How often workers check for new jobs
